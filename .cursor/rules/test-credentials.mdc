---
description: Test credentials for Playwright MCP browser testing
globs:
  - e2e/**/*
  - scripts/seed-test-admin.ts
alwaysApply: false
---

# Test Credentials for Browser Testing

When using Playwright MCP to test authenticated pages, use these credentials:

## Test Admin User

| Field    | Value              |
|----------|-------------------|
| Email    | `admin@test.local` |
| Password | `TestAdmin123!`    |
| Role     | `admin`            |

## Setup (First Time or After DB Reset)

The test admin must be created through the sign-up flow, then upgraded:

### Option 1: Automated via Playwright MCP

```
1. browser_navigate to http://localhost:5173/sign-up
2. browser_snapshot to get form refs
3. browser_fill_form with:
   - Name: "Test Admin"
   - Email: "admin@test.local"
   - Password: "TestAdmin123!"
   - Confirm Password: "TestAdmin123!"
4. browser_click on Sign up button
5. Run SQL to upgrade: UPDATE user SET role = 'admin', email_verified = 1 WHERE email = 'admin@test.local';
```

### Option 2: Manual SQL After Sign-Up

After signing up through the UI:

```bash
bunx wrangler d1 execute version-two-db --local --command "UPDATE user SET role = 'admin', email_verified = 1 WHERE email = 'admin@test.local';"
```

## Login Flow for Playwright MCP

1. `browser_navigate` to `http://localhost:5173/login`
2. `browser_snapshot` to get form element refs
3. `browser_fill_form` with fields:
   - Email textbox: `admin@test.local`
   - Password textbox: `TestAdmin123!`
4. `browser_click` on the Login button
5. `browser_snapshot` to verify redirect

## Cleanup (If User Already Exists)

```bash
bunx wrangler d1 execute version-two-db --local --command "DELETE FROM account WHERE user_id IN (SELECT id FROM user WHERE email = 'admin@test.local'); DELETE FROM session WHERE user_id IN (SELECT id FROM user WHERE email = 'admin@test.local'); DELETE FROM user WHERE email = 'admin@test.local';"
```

## Important Notes

- These credentials are for **local development only**
- Better Auth requires users to be created through the API (not direct DB insert)
- The user has `role: admin` so all admin pages are accessible
- Database name: `version-two-db` (check wrangler.jsonc if different)
